#!/bin/bash -ue

source $OPENSHIFT_CARTRIDGE_SDK_BASH

case "$1" in
  -v|--version)
    version="$2"
esac

ORIENTDB_VERSION_DIR=${OPENSHIFT_ORIENTDB_DIR}/versions/${version}

# Setup home directory
mkdir -p ${ORIENTDB_HOME}/{config,databases,plugins}

pushd $ORIENTDB_HOME 1> /dev/null
  ln -s ${ORIENTDB_VERSION_DIR}/benchmarks
  ln -s ${ORIENTDB_VERSION_DIR}/bin
  ln -s ${ORIENTDB_VERSION_DIR}/lib
  ln -s ${ORIENTDB_VERSION_DIR}/www
  cp -r ${ORIENTDB_VERSION_DIR}/config/* ./config
  cp -r ${ORIENTDB_VERSION_DIR}/databases/* ./databases
  cp -r ${ORIENTDB_VERSION_DIR}/plugins/* ./plugins
popd 1> /dev/null
